soccerStats.directive("editTeamModal",function(e,t,a,r,o,s,n,m){return{restrict:"E",templateUrl:"./templates/directives/edit-team-modal.html",controller:function(e){var t="editTeamModal";e.currentTeam={},e.editTeam={};var a=Parse.User.current();e.closeModal=function(){o.closeModal(t)},e.updateTeam=function(){if(o.validateAreaByFormName("teamForm")){var t=Parse.Object.extend("Team"),a=new Parse.Query(t);a.get(e.currentTeam.value,{success:function(t){t.set("leagueName",e.editTeam.leagueName),t.set("ageGroup",e.editTeam.ageGroup),t.set("primaryColor",e.editTeam.primaryColor),t.set("city",e.editTeam.city),t.set("name",e.editTeam.name),t.set("number",e.editTeam.number),t.set("state",_.invert(e.states)[e.editTeam.state]),e.editTeam.newLogo&&t.set("logo",e.editTeam.newLogo),console.log(e.editTeam),t.save(null,{success:function(){s.success(n.toasts.teamUpdateSuccess),e.closeModal()},error:function(e,t){s.error("There was a an error ("+t.code+"). Please try again.")}})},error:function(e,t){s.error("There was a an error ("+t.code+"). Please try again.")}})}else s.error(n.toasts.requiredFields)},e.deleteTeam=function(){},e.goToPage=function(e){o.goToPage(e)},e.ageGroups=m.ageGroups,e.states=m.states,a&&m.getTeams(function(t){console.log(m.currentTeam),e.currentTeam=jQuery.isEmptyObject(m.getCurrentTeam())?t[0]:m.getCurrentTeam(),console.log(e.currentTeam),e.editTeam={logo:e.currentTeam.logo?e.currentTeam.logo:"./img/team-logo-icon.svg",primaryColor:e.currentTeam.color?e.currentTeam.color:"",name:e.currentTeam.label,number:e.currentTeam.number,leagueName:e.currentTeam.league,ageGroup:e.ageGroups[e.currentTeam.age],city:e.currentTeam.city,state:e.states[e.currentTeam.state],newLogo:""}}),e.getImageColor=function(t){e.editTeam.primaryColor=t},e.ageGroups=m.ageGroups,e.states=m.states}}});