soccerStats.directive("editTeamModal",function(e,a,t,r,o,s,n,m){return{restrict:"E",templateUrl:"./templates/directives/edit-team-modal.html",controller:function(e){var a="editTeamModal";e.currentTeam={},e.editTeam={};var s=Parse.User.current();e.closeModal=function(){r.closeModal(a)},e.updateTeam=function(){if(r.validateAreaByFormName("teamForm")){var a=Parse.Object.extend("Team"),s=new Parse.Query(a);s.get(e.currentTeam.value,{success:function(a){a.set("leagueName",e.editTeam.leagueName),a.set("ageGroup",e.editTeam.ageGroup),a.set("city",e.editTeam.city),a.set("name",e.editTeam.name),a.set("number",e.editTeam.number),a.set("state",_.invert(e.states)[e.editTeam.state]),e.editTeam.newLogo&&a.set("logo",e.editTeam.newLogo),console.log(e.editTeam),a.save(null,{success:function(){o.success(n.toasts.teamUpdateSuccess),e.closeModal(),t.reload()},error:function(e,a){o.error("There was a an error ("+a.code+"). Please try again.")}})},error:function(e,a){o.error("There was a an error ("+a.code+"). Please try again.")}})}else o.error(n.toasts.requiredFields)},e.goToPage=function(e){r.goToPage(e)},e.ageGroups=m.ageGroups,e.states=m.states,s&&m.getTeams(function(a){console.log(m.currentTeam),e.currentTeam=jQuery.isEmptyObject(m.getCurrentTeam())?a[0]:m.getCurrentTeam(),console.log(e.currentTeam),e.editTeam={logo:e.currentTeam.logo,primaryColor:e.currentTeam.color,name:e.currentTeam.label,number:e.currentTeam.number,leagueName:e.currentTeam.league,ageGroup:e.ageGroups[e.currentTeam.age],city:e.currentTeam.city,state:e.states[e.currentTeam.state],newLogo:""}}),e.getImageColor=function(a){e.editTeam.primaryColor=a},e.ageGroups=m.ageGroups,e.states=m.states}}});