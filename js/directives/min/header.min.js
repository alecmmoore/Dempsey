soccerStats.directive("header",function(e,t,a,n,o,r){return{restrict:"E",templateUrl:"./templates/directives/header.html",controller:function(a){a.showTeams=!1,a.showAccount=!1,a.currentUser={},a.currentTeam={},a.teams=[];var s=r.getCurrentUser();s&&s.get("firstName")&&(a.currentUser={initials:s.get("firstName")[0]+s.get("lastName")[0]}),a.toggleTeams=function(){a.showTeams=!a.showTeams},a.toggleAccount=function(){a.showAccount=!a.showAccount},a.showCreateTeam=function(){a.toggleTeams(),n.openModal("teamModal")},a.showEditAccount=function(){a.toggleAccount(),n.openModal("accountModal")},a.editTeam=function(){n.openModal("editTeamModal")},a.inviteEmails=function(){n.openModal("inviteEmailModal")},a.addNewPlayer=function(){n.openModal("playerModal"),e(function(){t.$broadcast(o.messages.updatePlayer,{state:!1})})},a.updatePlayer=function(){n.openModal("playerModal"),e(function(){t.$broadcast(o.messages.updatePlayer,{state:!0})})},a.changeTeam=function(n){a.toggleTeams(),a.currentTeam=n,r.setCurrentTeam(a.currentTeam),e(function(){t.$broadcast(o.messages.teamChanged,{team:n})})},a.createGame=function(){n.openModal("createGameModal")},a.$on(o.messages.addNewTeam,function(t,n){e(function(){a.teams.push(n),a.currentTeam=n,r.setCurrentTeam(a.currentTeam)})}),a.$on(o.messages.updateTeam,function(t,n){e(function(){a.currentTeam=n,r.setCurrentTeam(a.currentTeam)})}),a.goToPage=function(e){n.goToPage(e)},Parse.User.current()&&(a.teams=r.getTeams(function(n){a.currentTeam=n[0],r.setCurrentTeam(n[0]),e(function(){t.$broadcast(o.messages.teamChanged,{team:n[0]})}),r.setCurrentTeam(a.currentTeam),e(function(){t.$broadcast(o.messages.teamSet,a.currentTeam)})}))}}});