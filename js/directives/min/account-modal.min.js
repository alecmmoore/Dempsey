soccerStats.directive("accountModal",function(e,t,s,r,o,a,i,n){return{restrict:"E",templateUrl:"./templates/directives/account-modal.html",controller:function(e,t){var r="accountModal";e.closeModal=function(){t.closeModal(r)},e.states=n.states,e.checkPassword=function(){return e.editUser.newPassword||e.editUser.confirmPassword?e.confirmPassword()?!0:!1:!0},e.confirmPassword=function(){return e.editUser.newPassword===e.editUser.confirmPassword};var a=Parse.User.current();e.editUser={firstName:a.get("firstName"),lastName:a.get("lastName"),name:a.get("name"),email:a.get("email"),newPassword:"",confirmPassword:a.get("password"),phone:a.get("phone"),city:a.get("city"),state:e.states[a.get("state")],photo:a.get("photo")._url,newPhoto:""},e.updateAccount=function(){t.validateAreaByFormName("accountForm")?e.checkPassword()&&(a.set("username",e.editUser.email),a.set("firstName",e.editUser.firstName),a.set("lastName",e.editUser.lastName),a.set("name",e.editUser.firstName+" "+e.editUser.lastName),a.set("email",e.editUser.email),a.set("phone",e.editUser.phone),a.set("city",e.editUser.city),a.set("state",_.invert(e.states)[e.editUser.state]),e.editUser.newPhoto&&a.set("photo",e.editUser.newPhoto),""!==e.editUser.newPassword&&a.set("password",e.editUser.newPassword),a.save(null,{success:function(){o.success(i.toasts.accountUpdateSuccess),e.closeModal(),s.reload()},error:function(e,t){console.log("Error: "+t.code+" "+t.message),o.error("There was a an error ("+t.code+"). Please try again.")}})):o.error(i.toasts.requiredFields)},e.goToPage=function(e){console.log(e),t.goToPage(e)}}}});