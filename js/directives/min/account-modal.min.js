soccerStats.directive("accountModal",function(e,t,s,a,o){return{restrict:"E",templateUrl:"./templates/directives/account-modal.html",controller:function(e,s){var r="accountModal";e.closeModal=function(){s.closeModal(r)},e.states=o.states,e.checkPassword=function(){return e.newUser.newPassword?e.confirmPassword()?!0:!1:!0},e.confirmPassword=function(){return e.newUser.newPassword===e.newUser.confirmPassword};var n=Parse.User.current();e.newUser={firstName:n.get("firstName"),lastName:n.get("lastName"),name:n.get("name"),email:n.get("email"),newPassword:"",confirmPassword:n.get("password"),phone:n.get("phone"),city:n.get("city"),state:e.states[n.get("state")],photo:n.get("photo")._url},e.updateAccount=function(o){s.validateAreaByFormName("accountForm")?e.checkPassword()&&(n.set("username",o.email),n.set("name",o.name),n.set("email",o.email),n.set("phone",o.phone),n.set("city",o.city),n.set("state",o.state.value),n.save(null,{success:function(){t.success(a.toasts.accountUpdateSuccess),s.goToPage("/home")},error:function(e,s){console.log("Error: "+s.code+" "+s.message),t.error("There was a an error ("+s.code+"). Please try again.")}})):t.error(a.toasts.requiredFields)},e.goToPage=function(e){s.goToPage(e)}}}});