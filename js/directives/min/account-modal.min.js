soccerStats.directive("accountModal",function(e,t,s,o,r,a,i){return{restrict:"E",templateUrl:"./templates/directives/account-modal.html",controller:function(e,t){var o="accountModal";e.closeModal=function(){t.closeModal(o)},e.states=i.states,e.checkPassword=function(){return e.editUser.newPassword||e.editUser.confirmPassword?e.confirmPassword()?!0:!1:!0},e.confirmPassword=function(){return e.editUser.newPassword===e.editUser.confirmPassword};var n=Parse.User.current();e.editUser={firstName:n.get("firstName")?n.get("firstName"):"",lastName:n.get("lastName")?n.get("lastName"):"",name:n.get("name")?n.get("name"):"",email:n.get("email")?n.get("email"):"",newPassword:"",confirmPassword:n.get("password")?n.get("password"):"",phone:n.get("phone")?n.get("phone"):"",city:n.get("city")?n.get("city"):"",state:e.states[n.get("state")?n.get("state"):""],photo:n.get("photo")?n.get("photo")._url:"./img/manager-icon.svg",newPhoto:""},e.updateAccount=function(){t.validateAreaByFormName("accountForm")?e.checkPassword()&&(n.set("username",e.editUser.email),n.set("firstName",e.editUser.firstName),n.set("lastName",e.editUser.lastName),n.set("name",e.editUser.firstName+" "+e.editUser.lastName),n.set("email",e.editUser.email),n.set("phone",e.editUser.phone),n.set("city",e.editUser.city),n.set("state",_.invert(e.states)[e.editUser.state]),e.editUser.newPhoto&&n.set("photo",e.editUser.newPhoto),""!==e.editUser.newPassword&&n.set("password",e.editUser.newPassword),n.save(null,{success:function(){r.success(a.toasts.accountUpdateSuccess),e.closeModal(),s.reload()},error:function(e,t){console.log("Error: "+t.code+" "+t.message),r.error("There was a an error ("+t.code+"). Please try again.")}})):r.error(a.toasts.requiredFields)},console.log(e.editUser),e.goToPage=function(e){console.log(e),t.goToPage(e)}}}});