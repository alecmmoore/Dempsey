soccerStats.directive("accountModal",function(e,t,s,a,r,o,i,n){return{restrict:"E",templateUrl:"./templates/directives/account-modal.html",controller:function(e,t){var a="accountModal";e.closeModal=function(){t.closeModal(a)},e.states=n.states,e.checkPassword=function(){return e.editUser.newPassword||e.editUser.confirmPassword?e.confirmPassword()?!0:!1:!0},e.confirmPassword=function(){return e.editUser.newPassword===e.editUser.confirmPassword};var o=Parse.User.current();e.editUser={firstName:o.get("firstName")?o.get("firstName"):"",lastName:o.get("lastName")?o.get("lastName"):"",name:o.get("name")?o.get("name"):"",email:o.get("email")?o.get("email"):"",newPassword:"",confirmPassword:o.get("password")?o.get("password"):"",phone:o.get("phone")?o.get("phone"):"",city:o.get("city")?o.get("city"):"",state:e.states[o.get("state")?o.get("state"):""],photo:o.get("photo")?o.get("photo")._url:"./img/manager-icon.svg",newPhoto:""},e.updateAccount=function(){t.validateAreaByFormName("accountForm")?e.checkPassword()&&(o.set("username",e.editUser.email),o.set("firstName",e.editUser.firstName),o.set("lastName",e.editUser.lastName),o.set("name",e.editUser.firstName+" "+e.editUser.lastName),o.set("email",e.editUser.email),o.set("phone",e.editUser.phone),o.set("city",e.editUser.city),o.set("state",_.invert(e.states)[e.editUser.state]),e.editUser.newPhoto&&o.set("photo",e.editUser.newPhoto),""!==e.editUser.newPassword&&o.set("password",e.editUser.newPassword),o.save(null,{success:function(){r.success(i.toasts.accountUpdateSuccess),e.closeModal(),s.reload()},error:function(e,t){console.log("Error: "+t.code+" "+t.message),r.error("There was a an error ("+t.code+"). Please try again.")}})):r.error(i.toasts.requiredFields)},e.goToPage=function(e){console.log(e),t.goToPage(e)}}}});