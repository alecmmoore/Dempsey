soccerStats.directive("playerModal",function(e,r,t,a,s,n,o){return{restrict:"E",templateUrl:"./templates/directives/player-modal.html",controller:function(e,t){var a="playerModal";e.closeModal=function(){t.closeModal(a)},e.states=o.states,e.player={photo:"",name:"Zlatan",birthday:"",team:"",jerseyNumber:"12",city:"Spokane",state:"",emergencyContact:{name:"Alec Moore",phone:"5093336897",relationship:"Father"}},e.goToPage=function(e){r(function(){t.goToPage(e)})},e.registerPlayer=function(r){if(t.validateAreaByFormName("playerForm")){var a=Parse.User.current(),o=Parse.Object.extend("Players"),c=new o,l=Parse.Object.extend("Team"),i=new Parse.Query(l);i.get(r.team.value,{success:function(t){c.set("photo",r.photo),c.set("name",r.name),c.set("birthday",r.birthday),c.set("team",t),c.set("jerseyNumber",r.jerseyNumber),c.set("city",r.city),c.set("state",_.invert(e.states)[r.state]),c.set("emergencyContact",r.emergencyContact.name),c.set("phone",r.emergencyContact.phone),c.set("relationship",r.emergencyContact.relationship),c.save(null,{success:function(e){a.addUnique("players",e),a.save(null,{success:function(){s.success("Player, "+r.name+", successfully added.")},erorr:function(e,r){s.error("There was a an error ("+r.code+"). Please try again.")}})},error:function(e,r){console.log("Error: "+r.code+" "+r.message),s.error("There was a an error ("+r.code+"). Please try again.")}})},error:function(e,r){s.error("There was a an error ("+r.code+"). Please try again.")}})}else s.error(n.toasts.requiredFields)},e.states=o.states,Parse.User.current()&&(e.teamDict=o.getTeams(function(){}))}}});