soccerStats.controller("shellController",function(o,e,s,t,n,r,a,i,c,u){e.isDesktop=a.isDesktop(),e.isMobile=navigator.userAgent.match(/Android|iPhone|iPod/i),e.isTablet=navigator.userAgent.match(/iPad/i);var l=[];o.currentPage="login",o.currentUser={},o.$on("$locationChangeSuccess",function(s,t){n(function(){var s=u.getCurrentUser();"login"!=o.currentPage&&"registration"!=o.currentPage&&(s.fetch()?console.log("user logged in"):(i.goToPage("/login"),o.currentUser={})),l.push({url:t.split("#")[1],state:{}}),o.currentPage=t.split("#")[1]?t.split("#")[1].split("/")[1]:"",e.$broadcast(r.messages.navigate,l[l.length-1].url)})}),o.goToPage=function(o){i.goToPage(o)},o.logout=function(){Parse.User.logOut(),c.success(r.toasts.logoutSuccess),i.goToPage("/login")},o.toasts=[],o.$on(r.messages.toast,function(o,e,s,t){g(e.message,s,t)});var g=function(e,s,t){var r={message:e,error:"error"===s,success:"success"===s,slideIn:!0,slideOut:!1};return n(function(){o.toasts.push(r)}),t?(t=o.closeToast(r),void 0):(n(function(){o.closeToast(r)},5e3),void 0)};o.closeToast=function(e){-1!=o.toasts.indexOf(e)&&(e.slideOut=!0,n(function(){o.toasts.splice(o.toasts.indexOf(e),1)},1e3))},o.currentModal="",o.$on(r.messages.closeModal,function(e,s){if(!s.modal)throw new Error("Must include modal ID when broadcasting this message.");n(function(){o.currentModal=""})}),o.$on(r.messages.openModal,function(e,s){if(!s.modal)throw new Error("Must include modal ID when broadcasting this message.");n(function(){o.currentModal=s.modal})}),o.openModal=function(e){o.currentModal=e},o.checkModal=function(e){return o.currentModal===e}});