soccerStats.controller("registrationController",function(e,a,l,n){e.tabNumber=0,e.formList=["accountForm","teamForm","inviteForm"],e.team={},e.setTab=function(a){var n=e.formList[e.tabNumber];e.tabNumber>a&&(e.tabNumber=a),e.confirmPassword()&&l.validateAreaByFormName(n)&&a===e.tabNumber+1&&(e.tabNumber=a)},e.isTab=function(a){return e.tabNumber===a},e.incrementTab=function(){e.setTab(e.tabNumber+1)},e.inviteEmails=[],e.addEmail=function(){l.validateAreaByFormName("inviteForm")&&e.inviteEmails.unshift(e.invite.email)},e.removeEmail=function(a){e.inviteEmails.splice(a,1)},e.sendEmailInvite=function(l,n){_.each(e.inviteEmails,function(e){a.sendEmailInvite(l.name,n.number,n.name,e)})},e.newUser={name:"Tommy Glasser",email:"example@example.com",password:"123",confirmPassword:"123",phone:"1234567890",city:"Spokane",state:"Washington"},e.team={logo:"",name:"Goliath",number:"1234DGC",leagueName:"Champions",ageGroup:"U12",city:"Spokane",state:"Montana"},e.confirmPassword=function(){return e.newUser.password===e.newUser.confirmPassword},e.register=function(a,l){var n=new Parse.User;n.set("username",a.email),n.set("name",a.name),n.set("email",a.email),n.set("password",a.password),n.set("phone",a.phone),n.set("city",a.city),n.set("state",a.state.value),n.set("accountType",1),n.signUp(null,{success:function(){console.log("registration successful");var n=Parse.Object.extend("Team"),t=new n;t.set("age_group",l.ageGroup.value),t.set("city",l.city),t.set("league_name",l.leagueName),t.set("name",l.name),t.set("number",l.number),t.set("state",l.state.value),t.set("logo",e.logoFile),t.save(null,{success:function(){console.log("Team registered"),e.sendEmailInvite(a,l)},error:function(e,a){console.log("Error: "+a.code+" "+a.message)}})},error:function(e,l){a.signUpFlag=!1,console.log("Error: "+l.code+" "+l.message)}})},e.selectFile=function(){$("#file").click()},e.fileNameChanged=function(a){console.log("select file");var l=a;if(l.files.length>0){var t=l.files[0],i="photo."+t.type.split("/").pop(),s=new Parse.File(i,t);n(function(){e.logoFile=s});var o=new FileReader;o.onloadend=function(){n(function(){e.team.logo=o.result})},o.readAsDataURL(t)}},e.sendEmailInvite=function(l,n){_.each(e.inviteEmails,function(e){a.sendEmailInvite(l.name,n.number,n.name,e)})},e.ageGroups=[{value:"",label:"Select an Age Group..."},{value:"U12",label:"U12"},{value:"U16",label:"U16"}],e.team.ageGroup=e.ageGroups[0],e.states=[{value:"",label:"Select a State"},{value:"AL",label:"Alabama"},{value:"AK",label:"Alaska"},{value:"AZ",label:"Arizona"},{value:"AR",label:"Arkansas"},{value:"CA",label:"California"},{value:"CO",label:"Colorado"},{value:"CT",label:"Connecticut"},{value:"DE",label:"Delaware"},{value:"DC",label:"District Of Columbia"},{value:"FL",label:"Florida"},{value:"GA",label:"Georgia"},{value:"HI",label:"Hawaii"},{value:"ID",label:"Idaho"},{value:"IL",label:"Illinois"},{value:"IN",label:"Indiana"},{value:"IA",label:"Iowa"},{value:"KS",label:"Kansas"},{value:"KY",label:"Kentucky"},{value:"LA",label:"Louisiana"},{value:"ME",label:"Maine"},{value:"MD",label:"Maryland"},{value:"MA",label:"Massachusetts"},{value:"MI",label:"Michigan"},{value:"MN",label:"Minnesota"},{value:"MS",label:"Mississippi"},{value:"MO",label:"Missouri"},{value:"MT",label:"Montana"},{value:"NE",label:"Nebraska"},{value:"NV",label:"Nevada"},{value:"NH",label:"New Hampshire"},{value:"NJ",label:"New Jersey"},{value:"NM",label:"New Mexico"},{value:"NY",label:"New York"},{value:"NC",label:"North Carolina"},{value:"ND",label:"North Dakota"},{value:"OH",label:"Ohio"},{value:"OK",label:"Oklahoma"},{value:"OR",label:"Oregon"},{value:"PA",label:"Pennsylvania"},{value:"RI",label:"Rhode Island"},{value:"SC",label:"South Carolina"},{value:"SD",label:"South Dakota"},{value:"TN",label:"Tennessee"},{value:"TX",label:"Texas"},{value:"UT",label:"Utah"},{value:"VT",label:"Vermont"},{value:"VA",label:"Virginia"},{value:"WA",label:"Washington"},{value:"WV",label:"West Virginia"},{value:"WI",label:"Wisconsin"},{value:"WY",label:"Wyoming"}],e.newUser.state=e.states[0],e.team.state=e.states[0]});