soccerStats.controller("registrationController",function(e,r,a,t,o,s,i){e.tabNumber=0,e.formList=["accountForm","teamForm","inviteForm"],e.team={},e.goToPage=function(e){a.goToPage(e)},e.setTab=function(r){var t=e.formList[e.tabNumber];return e.confirmPassword()?e.tabNumber>r?(e.tabNumber=r,void 0):(a.validateAreaByFormName(t)&&r===e.tabNumber+1?e.newUser.photo&&1===r||e.team.logo&&2===r?e.tabNumber=r:o.error(s.toasts.missingPhoto):o.error(s.toasts.requiredFields),void 0):(o.error(s.toasts.requiredFields),void 0)},e.isTab=function(r){return e.tabNumber===r},e.incrementTab=function(){e.setTab(e.tabNumber+1)},e.inviteEmails=[],e.addEmail=function(){a.validateAreaByFormName("inviteForm")?e.inviteEmails.unshift(e.invite.email):o.error(s.toasts.requiredFields)},e.removeEmail=function(r){e.inviteEmails.splice(r,1)},e.sendEmailInvite=function(a,t){_.each(e.inviteEmails,function(e){r.sendEmailInvite(a.name,t.id,t.get("name"),e)})},e.newUser={firstName:"Alec",lastName:"Moore",email:"abc@mailinator.com",password:"123",confirmPassword:"123",phone:"(123) 123-1234",city:"Gig Harbor",state:"",photo:""},e.team={logo:"",primaryColor:"",name:"Team Number 1",number:"1",leagueName:"MLS",ageGroup:"",city:"Gig Harbor",state:""},e.register=function(r,t){var n=i.registerTeam(t);n.save(null,{success:function(t){var i=new Parse.User;i.set("username",r.email),i.set("firstName",r.firstName),i.set("lastName",r.lastName),i.set("name",r.firstName+" "+r.lastName),i.set("email",r.email),i.set("password",r.password),i.set("phone",r.phone),i.set("city",r.city),i.set("state",_.invert(e.states)[r.state]),i.set("photo",r.photo),i.addUnique("teams",t),i.set("accountType",1),i.signUp(null,{success:function(){o.success(s.toasts.registrationSuccess),e.sendEmailInvite(r,t),a.goToPage("/home")},error:function(e,r){console.log("Error: "+r.code+" "+r.message),o.error("There was a an error ("+r.code+"). Please try again.")}})},error:function(e,r){console.log("Error: "+r.code+" "+r.message),o.error("There was a an error ("+r.code+"). Please try again.")}})},e.confirmPassword=function(){return e.newUser.password===e.newUser.confirmPassword},e.getImageColor=function(r){console.log("color"),e.team.primaryColor=r},e.ageGroups=i.ageGroups,e.states=i.states});