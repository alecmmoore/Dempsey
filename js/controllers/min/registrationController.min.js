soccerStats.controller("registrationController",function(e,r,t,a,s,o,i){e.tabNumber=0,e.formList=["accountForm","teamForm","inviteForm"],e.team={},e.goToPage=function(e){t.goToPage(e)},e.setTab=function(r){var a=e.formList[e.tabNumber];return e.confirmPassword()?e.tabNumber>r?(e.tabNumber=r,void 0):(t.validateAreaByFormName(a)&&r===e.tabNumber+1?e.tabNumber=r:s.error(o.toasts.requiredFields),void 0):(s.error(o.toasts.requiredFields),void 0)},e.isTab=function(r){return e.tabNumber===r},e.incrementTab=function(){e.setTab(e.tabNumber+1)},e.inviteEmails=[],e.addEmail=function(){t.validateAreaByFormName("inviteForm")?e.inviteEmails.unshift(e.invite.email):s.error(o.toasts.requiredFields)},e.removeEmail=function(r){e.inviteEmails.splice(r,1)},e.sendEmailInvite=function(t,a){_.each(e.inviteEmails,function(e){r.sendEmailInvite(t.name,a.id,a.get("name"),e)})},e.newUser={firstName:"",lastName:"",email:"",password:"",confirmPassword:"",phone:"",city:"",state:"",photo:""},e.team={logo:"",primaryColor:"",name:"",number:"",leagueName:"",ageGroup:"",city:"",state:""},e.register=function(r,a){var n=i.registerTeam(a);n.save(null,{success:function(a){var i=new Parse.User;i.set("username",r.email),i.set("firstName",r.firstName),i.set("lastName",r.lastName),i.set("name",r.firstName+" "+r.lastName),i.set("email",r.email),i.set("password",r.password),i.set("phone",r.phone),i.set("city",r.city),i.set("state",_.invert(e.states)[r.state]),r.photo&&i.set("photo",r.photo),i.addUnique("teams",a),i.set("accountType",1),i.signUp(null,{success:function(){s.success(o.toasts.registrationSuccess),e.sendEmailInvite(r,a),t.goToPage("/home")},error:function(e,r){console.log("Error: "+r.code+" "+r.message),s.error("There was a an error ("+r.code+"). Please try again.")}})},error:function(e,r){console.log("Error: "+r.code+" "+r.message),s.error("There was a an error ("+r.code+"). Please try again.")}})},e.confirmPassword=function(){return e.newUser.password===e.newUser.confirmPassword},e.getImageColor=function(r){console.log("color"),e.team.primaryColor=r},e.ageGroups=i.ageGroups,e.states=i.states});