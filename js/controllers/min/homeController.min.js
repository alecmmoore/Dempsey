soccerStats.controller("homeController",function(e,a,t,s,o,n,l,g){e.verified=!1,e.user={name:"",accountType:""};var m=Parse.User.current();m.fetch()&&(e.user.name=m.get("name"),m.get("emailVerified")?e.verified=!0:o.error(n.toasts.emailVerification)),e.updatePlayer=function(e){g.openModal("playerModal"),t(function(){s.$broadcast(n.messages.updatePlayer,{state:!0,id:e.id})})},e.$on(n.messages.teamChanged,function(a,t){l.getSeasonTeamStats(t.team.id,function(a){console.log(a),a?(e.teamStats={teamGames:{data:[{value:a.get("gamesDraw"),color:"#B4B4B4",highlight:"#B4B4B4",label:"Draws"},{value:a.get("gamesWon"),color:"#5DA97B",highlight:"#5DA97B",label:"Wins"},{value:a.get("gamesDefeat"),color:"#FF7373",highlight:"#FF7373",label:"Losses"}]},goalsConceded:a.get("goalsConceded"),goalsScored:a.get("goalsScored"),avgGoals:a.get("avgGoals"),ballPossession:a.get("ballPossession"),foulsCommitted:a.get("foulsCommitted"),gamesPlayed:a.get("gamesPlayed"),goalsDifference:a.get("goalsScored")-a.get("goalsConceded")>=0?"+".concat(a.get("goalsScored")-a.get("goalsConceded")):"-".concat(a.get("goalsScored")-a.get("goalsConceded")),topAssists:[],topGoals:[],topShots:[]},_.each(a.get("topAssists"),function(a){e.teamStats.topAssists.push({name:a.get("name"),num:a.get("playerStats").get("assists")})})):e.teamStats={teamGames:{data:[]},goalsConceded:0,goalsScored:0,avgGoals:0,ballPossession:0,foulsCommitted:0,gamesPlayed:0,goalsDifference:0,topAssists:[],topGoals:[],topShots:[]}})}),e.topGoals=[{name:"CLINT DEMPSEY",num:4},{name:"OBAFEMI MARTINS",num:3},{name:"MARCO PAPPA",num:2},{name:"LAMAR NEAGLE",num:1},{name:"ANDY ROSE",num:1}],e.topShots=[{name:"OBAFEMI MARTINS",num:4},{name:"CLINT DEMPSEY",num:3},{name:"MARCO PAPPA",num:2},{name:"LAMAR NEAGLE",num:1},{name:"ANDY ROSE",num:1}],e.isCoach=!1,e.$on(n.messages.teamSet,function(a,t){e.myPlayers=[],1===m.get("accountType")?l.getPlayersByTeamId(t.id,function(a){_.each(a,function(a){console.log(a),l.getSeasonPlayerStatsByPlayerId(a.get("playerStats").id,function(t){e.myPlayers.push(l.playerConstructor(a,t))})})}):_.each(m.get("players"),function(a){l.getPlayerByPlayerId(a.id,function(a){a.get("team").id===t.id&&(console.log(a),l.getSeasonPlayerStatsByPlayerId(a.get("playerStats").id,function(t){e.myPlayers.push(l.playerConstructor(a,t))}))})})})});