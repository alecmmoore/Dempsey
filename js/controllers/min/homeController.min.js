soccerStats.controller("homeController",function(e,a,t,o,n,s,l,m){e.verified=!1,e.user={name:"",accountType:""};var g=Parse.User.current();g.fetch()&&(e.user.name=g.get("name"),g.get("emailVerified")?e.verified=!0:n.error(s.toasts.emailVerification)),e.updatePlayer=function(e){m.openModal("playerModal"),t(function(){o.$broadcast(s.messages.updatePlayer,{state:!0,id:e.id})})},e.$on(s.messages.teamChanged,function(a,t){l.getSeasonTeamStats(t.team.id,function(a){console.log(a),e.teamStats={},e.teamStats={teamGames:{data:[{value:a.get("gamesDraw"),color:"#B4B4B4",highlight:"#B4B4B4",label:"Draws"},{value:a.get("gamesWon"),color:"#5DA97B",highlight:"#5DA97B",label:"Wins"},{value:a.get("gamesDefeat"),color:"#FF7373",highlight:"#FF7373",label:"Losses"}]},goalsConceded:a.get("goalsConceded"),goalsScored:a.get("goalsScored"),avgGoals:a.get("avgGoals"),ballPossession:a.get("ballPossession"),foulsCommitted:a.get("foulsCommitted"),gamesPlayed:a.get("gamesPlayed"),goalsDifference:a.get("goalsScored")-a.get("goalsConceded")>=0?"+".concat(a.get("goalsScored")-a.get("goalsConceded")):"-".concat(a.get("goalsScored")-a.get("goalsConceded"))}})}),e.topGoals=[{name:"CLINT DEMPSEY",num:4},{name:"OBAFEMI MARTINS",num:3},{name:"MARCO PAPPA",num:2},{name:"LAMAR NEAGLE",num:1},{name:"ANDY ROSE",num:1}],e.topAssists=[{name:"OBAFEMI MARTINS",num:4},{name:"CLINT DEMPSEY",num:3},{name:"MARCO PAPPA",num:2},{name:"LAMAR NEAGLE",num:1},{name:"ANDY ROSE",num:1}],e.topShots=[{name:"OBAFEMI MARTINS",num:4},{name:"CLINT DEMPSEY",num:3},{name:"MARCO PAPPA",num:2},{name:"LAMAR NEAGLE",num:1},{name:"ANDY ROSE",num:1}],e.isCoach=!1,e.$on(s.messages.teamSet,function(a,t){e.myPlayers=[],1===g.get("accountType")?l.getPlayersByTeamId(t.id,function(a){_.each(a,function(a){l.getSeasonPlayerStatsByPlayerId(a.id,function(t){e.myPlayers.push(l.playerConstructor(a,t))})})}):_.each(g.get("players"),function(a){l.getPlayerByPlayerId(a.id,function(a){a.get("team").id===t.id&&l.getSeasonPlayerStatsByPlayerId(a.id,function(t){e.myPlayers.push(l.playerConstructor(a,t))})})})})});